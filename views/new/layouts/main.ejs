<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link rel="stylesheet" href="/css/new/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body class="expanded">
    <!-- 折叠时的菜单按钮 -->
    <div class="menu-toggle" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
    </div>

    <!-- 用户登录按钮/头像 -->
    <div class="user-profile">
        <div class="login-btn" id="loginBtn" onclick="showLoginModal()">
            <!-- <i class="fas fa-sign-in-alt"></i> -->
            <span>登录</span>
        </div>
        <div class="user-avatar hidden" id="userAvatar" onclick="toggleUserMenu()">
            <img src="" alt="用户头像">
            <div class="user-menu">
                <div class="menu-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    退出登录
                </div>
            </div>
        </div>
    </div>

    <nav class="sidebar">
        <div class="sidebar-header">
            <div class="kimi-profile">
                <a href="/" class="logo">AI Teaching Assistant</a>
            </div>
            <button class="collapse-btn" onclick="toggleSidebar()">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="none" viewBox="0 0 24 24">
                    <path fill="currentColor" fill-rule="evenodd"
                        d="M10.247 6.844v10.334h7.871c.325 0 .546-.085.695-.229.144-.14.234-.363.234-.708V7.78c0-.345-.09-.568-.234-.708-.149-.144-.37-.23-.695-.23zm-1.423 0H5.889c-.33 0-.553.085-.7.228-.14.14-.228.363-.228.71v8.459c0 .346.087.57.227.71.148.142.371.227.701.227h2.935zM5.702 12.93a.556.556 0 0 1 .005-.814.58.58 0 0 1 .399-.16h1.573c.156 0 .297.053.408.163a.556.556 0 0 1 .003.812.57.57 0 0 1-.411.165H6.106a.57.57 0 0 1-.399-.16zM4.1 5.994c.417-.408 1.021-.594 1.774-.594h12.259c.753 0 1.356.186 1.768.595s.599 1 .599 1.734v8.564c0 .735-.188 1.326-.599 1.734-.412.41-1.015.595-1.768.595H5.874c-.753 0-1.357-.186-1.774-.594-.413-.404-.6-.996-.6-1.735V7.729c0-.739.187-1.33.6-1.735m3.579 3.45H6.106a.56.56 0 0 1-.404-.173.56.56 0 0 1-.174-.4.54.54 0 0 1 .177-.404.56.56 0 0 1 .4-.17H7.68c.16 0 .3.058.41.172a.54.54 0 0 1 .175.401c0 .155-.064.29-.172.398a.56.56 0 0 1-.413.176m0 1.83H6.106a.56.56 0 0 1-.404-.173.56.56 0 0 1-.174-.409c0-.156.065-.29.177-.396a.56.56 0 0 1 .4-.17H7.68c.16 0 .3.059.41.173.111.105.175.239.175.393a.56.56 0 0 1-.172.406.56.56 0 0 1-.413.175"
                        clip-rule="evenodd" />
                </svg>
            </button>
        </div>
        <ul class="sidebar-menu">
            <li><a href="/new/text-chat" class="<%= path === '/new/text-chat' ? 'active' : '' %>">
                    <span role="img" class="semi-icon semi-icon-default icon-WexzHI"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M5.852 12.664q0-.312.218-.531a.74.74 0 0 1 .532-.219h4.648V7.266q0-.297.219-.524A.7.7 0 0 1 12 6.516q.313 0 .523.226a.73.73 0 0 1 .22.524v4.648h4.655q.297 0 .516.219a.7.7 0 0 1 .227.531.7.7 0 0 1-.227.531.7.7 0 0 1-.516.22h-4.656v4.648a.71.71 0 0 1-.219.523.7.7 0 0 1-.523.219.72.72 0 0 1-.531-.22.71.71 0 0 1-.219-.523v-4.648H6.602a.74.74 0 0 1-.532-.219.72.72 0 0 1-.218-.53">
                            </path>
                        </svg></span>
                    <span>文本对话</span>
                </a></li>
            <li><a href="/new/image-chat" class="<%= path === '/new/image-chat' ? 'active' : '' %>">
                    <span role="img" class="semi-icon semi-icon-default text-20"><svg xmlns="http://www.w3.org/2000/svg"
                            width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M18.889 10.965q.12.108.28.108a.4.4 0 0 0 .284-.108.45.45 0 0 0 .146-.276q.097-.645.205-1.087a2.6 2.6 0 0 1 .28-.724q.172-.285.448-.451.28-.168.707-.264a9 9 0 0 1 1.045-.171.429.429 0 0 0 .401-.435.4.4 0 0 0-.112-.285.47.47 0 0 0-.285-.15q-.619-.088-1.041-.188a2.4 2.4 0 0 1-.69-.268 1.35 1.35 0 0 1-.443-.443 2.7 2.7 0 0 1-.289-.711q-.112-.44-.226-1.083a.45.45 0 0 0-.15-.276.4.4 0 0 0-.28-.109.4.4 0 0 0-.285.109.44.44 0 0 0-.142.276q-.096.645-.205 1.087a2.6 2.6 0 0 1-.284.724 1.36 1.36 0 0 1-.448.451q-.275.168-.702.264t-1.05.167a.44.44 0 0 0-.284.146.4.4 0 0 0-.113.289q0 .166.109.288.113.121.284.147.624.091 1.041.192.422.1.695.268.27.167.439.443.171.275.288.71.117.44.23 1.084.03.166.147.276">
                            </path>
                            <path fill="currentColor"
                                d="M19.91 16.675v-4.158a2.08 2.08 0 0 1-1.508-.012v3.016l-3.223-3.02q-.225-.21-.482-.313a1.43 1.43 0 0 0-1.06 0 1.7 1.7 0 0 0-.49.3l-3.066 2.739-1.25-1.129a1.7 1.7 0 0 0-.456-.278 1.1 1.1 0 0 0-.463-.102q-.245 0-.455.095-.21.088-.421.279l-1.768 1.574V8.075q0-.47.231-.7.239-.231.687-.231h7.93a2.01 2.01 0 0 1 1.441-1.51H6.063q-1.128 0-1.72.585-.585.578-.584 1.7v8.756q0 1.109.585 1.692.59.585 1.72.585h11.55q1.127 0 1.712-.585.585-.584.585-1.692">
                            </path>
                            <path fill="currentColor"
                                d="M9.177 12.712a1.6 1.6 0 0 1-.83-.225 1.7 1.7 0 0 1-.598-.598 1.6 1.6 0 0 1-.224-.836q0-.449.224-.823a1.7 1.7 0 0 1 .599-.605q.373-.225.829-.224.455 0 .822.224.375.225.599.605.224.375.224.823 0 .456-.224.836-.225.375-.599.598-.367.225-.822.225">
                            </path>
                        </svg></span>
                    <span>图片生成</span>
                </a></li>
            <li><a href="/new/ppt-gen" class="<%= path === '/new/ppt-gen' ? 'active' : '' %>">
                    <!-- <i class="fas fa-file-powerpoint semi-icon"></i> 添加图标 -->
                    <span role="img" class="semi-icon semi-icon-default icon-123">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z" />
                            <path fill="currentColor" d="M15 11h-3V8h-2v3H9v2h1v3h2v-3h3z" />
                        </svg>

                    </span>
                    <span>PPT生成</span>
                </a></li>
        </ul>
        <div class="chat-history">
            <div class="history-header" onclick="toggleHistory()">
                <div class="history-header-content">
                    <span role="img" class="semi-icon semi-icon-default text-20 mr-8"><svg
                            xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path fill="currentColor"
                                d="M8.273 21.07q-.468 0-.734-.304-.258-.305-.258-.828v-1.922H6.86q-1.132 0-1.945-.438a3.02 3.02 0 0 1-1.242-1.25q-.43-.82-.43-1.984V8.28q0-1.164.43-1.976.429-.82 1.242-1.258.82-.438 2-.438h10.164q1.172 0 1.992.438.82.437 1.25 1.258.43.812.43 1.976v6.063q0 1.164-.43 1.984a2.95 2.95 0 0 1-1.25 1.25q-.82.438-1.992.438H12.25l-2.672 2.367a4.3 4.3 0 0 1-.687.515 1.2 1.2 0 0 1-.618.172m.383-1.726 2.477-2.453q.25-.25.46-.328a1.6 1.6 0 0 1 .579-.086h4.86q1.109 0 1.64-.547.54-.555.539-1.64V8.327q0-1.078-.54-1.625-.53-.555-1.64-.555H6.953q-1.101 0-1.64.555-.532.547-.532 1.625v5.961q0 1.085.532 1.64.539.548 1.64.548h1.07q.33 0 .477.148.156.141.156.492zm-.437-6.867q-.485 0-.828-.344a1.13 1.13 0 0 1-.336-.82q0-.478.336-.82.343-.345.828-.345t.82.344q.336.345.336.82 0 .478-.336.82-.336.345-.82.345m3.781 0q-.485 0-.828-.344a1.12 1.12 0 0 1-.344-.82q0-.478.344-.82.343-.345.828-.345.477 0 .82.344.345.345.344.82 0 .478-.344.82a1.12 1.12 0 0 1-.82.345m3.773 0a1.12 1.12 0 0 1-.82-.344 1.13 1.13 0 0 1-.336-.82q0-.478.336-.82.345-.345.82-.345.485 0 .82.344.345.345.345.82 0 .478-.344.82-.337.345-.82.345">
                            </path>
                        </svg>
                    </span>
                    <span>历史对话</span>
                </div>
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="history-list" id="historyList">
            </div>
        </div>
    </nav>

    <main class="main-content">
        <%- body %>
    </main>

    <script src="/js/new/layout.js"></script>
    <%- script %>
</body>

</html>